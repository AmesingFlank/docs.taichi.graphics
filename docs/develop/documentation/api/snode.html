<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Structural nodes (SNodes) | Taichi</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="The Taichi Programming Language">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="og:locale" content="en_US">
    
    <link rel="preload" href="/assets/css/0.styles.0090509f.css" as="style"><link rel="preload" href="/assets/js/app.28bfd1c3.js" as="script"><link rel="preload" href="/assets/js/5.80df7d3d.js" as="script"><link rel="preload" href="/assets/js/44.6f655fd0.js" as="script"><link rel="prefetch" href="/assets/js/1.9c5325df.js"><link rel="prefetch" href="/assets/js/10.0c0a5a26.js"><link rel="prefetch" href="/assets/js/100.c69c83ba.js"><link rel="prefetch" href="/assets/js/101.2f8ba7d7.js"><link rel="prefetch" href="/assets/js/102.4170142e.js"><link rel="prefetch" href="/assets/js/103.f74b7804.js"><link rel="prefetch" href="/assets/js/104.2716cc6b.js"><link rel="prefetch" href="/assets/js/105.cab3475c.js"><link rel="prefetch" href="/assets/js/106.aa7996b8.js"><link rel="prefetch" href="/assets/js/107.ee0bc59c.js"><link rel="prefetch" href="/assets/js/108.77af88d2.js"><link rel="prefetch" href="/assets/js/109.fef098af.js"><link rel="prefetch" href="/assets/js/11.6ade9e33.js"><link rel="prefetch" href="/assets/js/110.2b48df1e.js"><link rel="prefetch" href="/assets/js/111.e40ad007.js"><link rel="prefetch" href="/assets/js/112.c54ba940.js"><link rel="prefetch" href="/assets/js/113.8ef2982d.js"><link rel="prefetch" href="/assets/js/114.7c72b661.js"><link rel="prefetch" href="/assets/js/115.30785b12.js"><link rel="prefetch" href="/assets/js/116.2ce2bbc6.js"><link rel="prefetch" href="/assets/js/117.86c581b9.js"><link rel="prefetch" href="/assets/js/12.ccd77716.js"><link rel="prefetch" href="/assets/js/13.1d9d0c6b.js"><link rel="prefetch" href="/assets/js/14.f9f478af.js"><link rel="prefetch" href="/assets/js/15.a00f2f5e.js"><link rel="prefetch" href="/assets/js/16.dea40c73.js"><link rel="prefetch" href="/assets/js/17.0f4af88b.js"><link rel="prefetch" href="/assets/js/18.9f1feabc.js"><link rel="prefetch" href="/assets/js/19.878548fd.js"><link rel="prefetch" href="/assets/js/2.b7be0497.js"><link rel="prefetch" href="/assets/js/20.4af8d1e8.js"><link rel="prefetch" href="/assets/js/21.27dd6b17.js"><link rel="prefetch" href="/assets/js/22.345bdba1.js"><link rel="prefetch" href="/assets/js/23.927109db.js"><link rel="prefetch" href="/assets/js/24.873b821d.js"><link rel="prefetch" href="/assets/js/25.a595b88a.js"><link rel="prefetch" href="/assets/js/26.857082b3.js"><link rel="prefetch" href="/assets/js/27.42a481c3.js"><link rel="prefetch" href="/assets/js/28.263e2ad5.js"><link rel="prefetch" href="/assets/js/29.36594a55.js"><link rel="prefetch" href="/assets/js/30.32679e66.js"><link rel="prefetch" href="/assets/js/31.3bdfc9c4.js"><link rel="prefetch" href="/assets/js/32.1dd531d9.js"><link rel="prefetch" href="/assets/js/33.213445e4.js"><link rel="prefetch" href="/assets/js/34.2f9a68ce.js"><link rel="prefetch" href="/assets/js/35.af6a0268.js"><link rel="prefetch" href="/assets/js/36.a1830447.js"><link rel="prefetch" href="/assets/js/37.e0882649.js"><link rel="prefetch" href="/assets/js/38.9069d11f.js"><link rel="prefetch" href="/assets/js/39.b8b0ef76.js"><link rel="prefetch" href="/assets/js/4.8c561627.js"><link rel="prefetch" href="/assets/js/40.52b0be8f.js"><link rel="prefetch" href="/assets/js/41.500f9b4c.js"><link rel="prefetch" href="/assets/js/42.66b79039.js"><link rel="prefetch" href="/assets/js/43.2e8f2644.js"><link rel="prefetch" href="/assets/js/45.da72820d.js"><link rel="prefetch" href="/assets/js/46.94aa29a0.js"><link rel="prefetch" href="/assets/js/47.e45cc88a.js"><link rel="prefetch" href="/assets/js/48.4d1cba20.js"><link rel="prefetch" href="/assets/js/49.c1050a75.js"><link rel="prefetch" href="/assets/js/50.3aa8665e.js"><link rel="prefetch" href="/assets/js/51.0859a98c.js"><link rel="prefetch" href="/assets/js/52.65ba68ca.js"><link rel="prefetch" href="/assets/js/53.4acf2234.js"><link rel="prefetch" href="/assets/js/54.7b4f5e2b.js"><link rel="prefetch" href="/assets/js/55.df948e84.js"><link rel="prefetch" href="/assets/js/56.2677d948.js"><link rel="prefetch" href="/assets/js/57.f1a7106b.js"><link rel="prefetch" href="/assets/js/58.ffc9c4bd.js"><link rel="prefetch" href="/assets/js/59.6764f797.js"><link rel="prefetch" href="/assets/js/6.d708cc47.js"><link rel="prefetch" href="/assets/js/60.e489107a.js"><link rel="prefetch" href="/assets/js/61.f41f65b2.js"><link rel="prefetch" href="/assets/js/62.8f895890.js"><link rel="prefetch" href="/assets/js/63.f37ae3cd.js"><link rel="prefetch" href="/assets/js/64.82e3773f.js"><link rel="prefetch" href="/assets/js/65.3ff418db.js"><link rel="prefetch" href="/assets/js/66.d5e5ab19.js"><link rel="prefetch" href="/assets/js/67.b52ee259.js"><link rel="prefetch" href="/assets/js/68.c616b0d0.js"><link rel="prefetch" href="/assets/js/69.09b011b8.js"><link rel="prefetch" href="/assets/js/7.238b5399.js"><link rel="prefetch" href="/assets/js/70.d11ea2ee.js"><link rel="prefetch" href="/assets/js/71.7dfac8e6.js"><link rel="prefetch" href="/assets/js/72.ae6eeac4.js"><link rel="prefetch" href="/assets/js/73.5907f48f.js"><link rel="prefetch" href="/assets/js/74.a34d3143.js"><link rel="prefetch" href="/assets/js/75.ee545643.js"><link rel="prefetch" href="/assets/js/76.63cad733.js"><link rel="prefetch" href="/assets/js/77.6e2d0bc4.js"><link rel="prefetch" href="/assets/js/78.c47d806f.js"><link rel="prefetch" href="/assets/js/79.ba2eff0b.js"><link rel="prefetch" href="/assets/js/8.e59ef83a.js"><link rel="prefetch" href="/assets/js/80.943cb5ea.js"><link rel="prefetch" href="/assets/js/81.f0834305.js"><link rel="prefetch" href="/assets/js/82.16026ec5.js"><link rel="prefetch" href="/assets/js/83.289856d1.js"><link rel="prefetch" href="/assets/js/84.d3c62591.js"><link rel="prefetch" href="/assets/js/85.7a131ff2.js"><link rel="prefetch" href="/assets/js/86.50fa099c.js"><link rel="prefetch" href="/assets/js/87.2dd38c8c.js"><link rel="prefetch" href="/assets/js/88.06abfaee.js"><link rel="prefetch" href="/assets/js/89.b4e3cca0.js"><link rel="prefetch" href="/assets/js/9.b074f1fc.js"><link rel="prefetch" href="/assets/js/90.a4dabbb0.js"><link rel="prefetch" href="/assets/js/91.5ac09c05.js"><link rel="prefetch" href="/assets/js/92.24ba2f7b.js"><link rel="prefetch" href="/assets/js/93.2ddc9ea5.js"><link rel="prefetch" href="/assets/js/94.2ee58065.js"><link rel="prefetch" href="/assets/js/95.9405d977.js"><link rel="prefetch" href="/assets/js/96.1a9f04c2.js"><link rel="prefetch" href="/assets/js/97.132940e4.js"><link rel="prefetch" href="/assets/js/98.c8b0ae37.js"><link rel="prefetch" href="/assets/js/99.c8a23dd8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0090509f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo_medium.png" alt="Taichi" class="logo"> <span class="site-name can-hide">Taichi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow down"></span></button> <button type="button" aria-label="Documentation" class="mobile-dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/develop/documentation/overview/overview.html" class="nav-link">
  develop
</a></li></ul></div></div><div class="nav-item"><a href="/tutorials/" class="nav-link">
  Tutorials
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn More" class="mobile-dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Explore
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/gallery/" class="nav-link">
  Gallery
</a></li><li class="dropdown-subitem"><a href="/research/" class="nav-link">
  Research
</a></li><li class="dropdown-subitem"><a href="http://hub.taichi.graphics/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Taichi Hub Playground
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Resources
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/contribution/" class="nav-link">
  Contribution Guide
</a></li><li class="dropdown-subitem"><a href="/events/" class="nav-link">
  Events
</a></li><li class="dropdown-subitem"><a href="https://github.com/taichi-dev/taichi/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          FAQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/faq/" class="nav-link">
  FAQ
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://forum.taichi.graphics/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/develop/documentation/api/snode.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/docs/develop/documentation/api/snode.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/taichi-dev/taichi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow down"></span></button> <button type="button" aria-label="Documentation" class="mobile-dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/develop/documentation/overview/overview.html" class="nav-link">
  develop
</a></li></ul></div></div><div class="nav-item"><a href="/tutorials/" class="nav-link">
  Tutorials
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn More" class="mobile-dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Explore
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/gallery/" class="nav-link">
  Gallery
</a></li><li class="dropdown-subitem"><a href="/research/" class="nav-link">
  Research
</a></li><li class="dropdown-subitem"><a href="http://hub.taichi.graphics/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Taichi Hub Playground
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Resources
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/contribution/" class="nav-link">
  Contribution Guide
</a></li><li class="dropdown-subitem"><a href="/events/" class="nav-link">
  Events
</a></li><li class="dropdown-subitem"><a href="https://github.com/taichi-dev/taichi/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          FAQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/faq/" class="nav-link">
  FAQ
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://forum.taichi.graphics/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/develop/documentation/api/snode.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/docs/develop/documentation/api/snode.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/taichi-dev/taichi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Basic Concepts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Advanced Programming</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>API References</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/develop/documentation/api/field.html" class="sidebar-link">Field</a></li><li><a href="/docs/develop/documentation/api/ti.html" class="sidebar-link">ti</a></li><li><a href="/docs/develop/documentation/api/scalar_field.html" class="sidebar-link">Scalar fields</a></li><li><a href="/docs/develop/documentation/api/vector.html" class="sidebar-link">Vectors</a></li><li><a href="/docs/develop/documentation/api/matrix.html" class="sidebar-link">Matrices</a></li><li><a href="/docs/develop/documentation/api/arithmetics.html" class="sidebar-link">Scalar operations</a></li><li><a href="/docs/develop/documentation/api/atomic.html" class="sidebar-link">Atomic operations</a></li><li><a href="/docs/develop/documentation/api/snode.html" aria-current="page" class="active sidebar-link">Structural nodes (SNodes)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/develop/documentation/api/snode.html#node-types" class="sidebar-link">Node types</a></li><li class="sidebar-sub-header"><a href="/docs/develop/documentation/api/snode.html#working-with-dynamic-snodes" class="sidebar-link">Working with dynamic SNodes</a></li><li class="sidebar-sub-header"><a href="/docs/develop/documentation/api/snode.html#taichi-fields-like-powers-of-two" class="sidebar-link">Taichi fields like powers of two</a></li><li class="sidebar-sub-header"><a href="/docs/develop/documentation/api/snode.html#indices" class="sidebar-link">Indices</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Miscellaneous</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Acknowledgments</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Legacy</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="structural-nodes-snodes"><a href="#structural-nodes-snodes" class="header-anchor">#</a> Structural nodes (SNodes)</h1> <p>After writing the computation code, the user needs to specify the
internal data structure hierarchy. Specifying a data structure includes
choices at both the macro level, dictating how the data structure
components nest with each other and the way they represent sparsity, and
the micro level, dictating how data are grouped together (e.g. structure
of arrays vs. array of structures). Taichi provides <em>Structural Nodes
(SNodes)</em> to compose the hierarchy and particular properties. These
constructs and their semantics are listed below:</p> <ul><li>dense: A fixed-length contiguous array.</li> <li>bitmasked: This is similar to dense, but it also uses a mask to
maintain sparsity information, one bit per child.</li> <li>pointer: Store pointers instead of the whole structure to save
memory and maintain sparsity.</li> <li>dynamic: Variable-length array, with a predefined maximum length. It
serves the role of <code>std::vector</code> in C++ or <code>list</code> in Python, and can
be used to maintain objects (e.g. particles) contained in a block.</li></ul> <div class="custom-block note"><p class="custom-block-title">NOTE</p> <p>Supported SNode types on each backend:</p> <table><thead><tr><th style="text-align:center;">SNode</th> <th style="text-align:center;">CPU/CUDA</th> <th style="text-align:center;">OpenGL</th> <th style="text-align:center;">Metal</th> <th style="text-align:center;">C source</th></tr></thead> <tbody><tr><td style="text-align:center;">dense</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">OK</td></tr> <tr><td style="text-align:center;">bitmasked</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">N/A</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">N/A</td></tr> <tr><td style="text-align:center;">pointer</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">N/A</td> <td style="text-align:center;">N/A</td> <td style="text-align:center;">N/A</td></tr> <tr><td style="text-align:center;">dynamic</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">PAR</td> <td style="text-align:center;">N/A</td> <td style="text-align:center;">N/A</td></tr></tbody></table> <p>(OK: supported; PAR: partial support; N/A: not available)</p></div> <p>See <code>layout</code>{.interpreted-text role=&quot;ref&quot;} for more details. <code>ti.root</code>
is the root node of the data structure.</p> <p>::: {.function}
snode.place(x, ...)</p> <p>parameter snode</p> <p>: (SNode) where to place</p> <p>parameter a</p> <p>: (ti.field) field(s) to be placed</p> <p>return</p> <p>: (SNode) the <code>snode</code> itself</p> <p>The following code places two 0-D fields named <code>x</code> and <code>y</code>:</p> <div class="language- extra-class"><pre><code>x = ti.field(dtype=ti.i32)
y = ti.field(dtype=ti.f32)
ti.root.place(x, y)
assert x.snode.parent == y.snode.parent
</code></pre></div><p>:::</p> <p>::: {.function}
field.shape</p> <p>parameter a</p> <p>: (ti.field)</p> <p>return</p> <p>: (tuple of integers) the shape of field</p> <p>Equivalent to <code>field.snode.shape</code>.</p> <p>For example,</p> <div class="language- extra-class"><pre><code>ti.root.dense(ti.ijk, (3, 5, 4)).place(x)
x.shape  # returns (3, 5, 4)
</code></pre></div><p>:::</p> <p>::: {.function}
field.snode</p> <p>parameter a</p> <p>: (ti.field)</p> <p>return</p> <p>: (SNode) the structual node where <code>field</code> is placed</p> <div class="language-{=html} extra-class"><pre class="language-text"><code>&lt;!-- --&gt;
</code></pre></div><div class="language- extra-class"><pre><code>x = ti.field(dtype=ti.i32)
y = ti.field(dtype=ti.f32)
blk1 = ti.root.dense(ti.i, 4)
blk1.place(x, y)
assert x.snode == blk1
</code></pre></div><p>:::</p> <p>::: {.function}
snode.shape</p> <p>parameter snode</p> <p>: (SNode)</p> <p>return</p> <p>: (tuple) the size of node along that axis</p> <div class="language-{=html} extra-class"><pre class="language-text"><code>&lt;!-- --&gt;
</code></pre></div><div class="language- extra-class"><pre><code>blk1 = ti.root
blk2 = blk1.dense(ti.i,  3)
blk3 = blk2.dense(ti.jk, (5, 2))
blk4 = blk3.dense(ti.k,  2)
blk1.shape  # ()
blk2.shape  # (3, )
blk3.shape  # (3, 5, 2)
blk4.shape  # (3, 5, 4)
</code></pre></div><p>:::</p> <p>::: {.function}
snode.parent(n = 1)</p> <p>parameter snode</p> <p>: (SNode)</p> <p>parameter n</p> <p>: (optional, scalar) the number of steps, i.e. <code>n=1</code> for parent, <code>n=2</code>
grandparent, etc.</p> <p>return</p> <p>: (SNode) the parent node of <code>snode</code></p> <div class="language-{=html} extra-class"><pre class="language-text"><code>&lt;!-- --&gt;
</code></pre></div><div class="language- extra-class"><pre><code>blk1 = ti.root.dense(ti.i, 8)
blk2 = blk1.dense(ti.j, 4)
blk3 = blk2.bitmasked(ti.k, 6)
blk1.parent()  # ti.root
blk2.parent()  # blk1
blk3.parent()  # blk2
blk3.parent(1) # blk2
blk3.parent(2) # blk1
blk3.parent(3) # ti.root
blk3.parent(4) # None
</code></pre></div><p>:::</p> <h2 id="node-types"><a href="#node-types" class="header-anchor">#</a> Node types</h2> <p>::: {.function}
snode.dense(indices, shape)</p> <p>parameter snode</p> <p>: (SNode) parent node where the child is derived from</p> <p>parameter indices</p> <p>: (Index or Indices) indices used for this node</p> <p>parameter shape</p> <p>: (scalar or tuple) shape of the field</p> <p>return</p> <p>: (SNode) the derived child node</p> <p>The following code places a 1-D field of size <code>3</code>:</p> <div class="language- extra-class"><pre><code>x = ti.field(dtype=ti.i32)
ti.root.dense(ti.i, 3).place(x)
</code></pre></div><p>The following code places a 2-D field of shape <code>(3, 4)</code>:</p> <div class="language- extra-class"><pre><code>x = ti.field(dtype=ti.i32)
ti.root.dense(ti.ij, (3, 4)).place(x)
</code></pre></div><div class="custom-block note"><p class="custom-block-title">NOTE</p> <p>If <code>shape</code> is a scalar and there are multiple indices, then <code>shape</code> will
be automatically expanded to fit the number of indices. For example,</p> <div class="language- extra-class"><pre><code>snode.dense(ti.ijk, 3)
</code></pre></div><p>is equivalent to</p> <div class="language- extra-class"><pre><code>snode.dense(ti.ijk, (3, 3, 3))
</code></pre></div></div> <p>:::</p> <p>::: {.function}
snode.dynamic(index, size, chunk_size = None)</p> <p>parameter snode</p> <p>: (SNode) parent node where the child is derived from</p> <p>parameter index</p> <p>: (Index) the <code>dynamic</code> node indices</p> <p>parameter size</p> <p>: (scalar) the maximum size of the dynamic node</p> <p>parameter chunk_size</p> <p>: (optional, scalar) the number of elements in each dynamic memory
allocation chunk</p> <p>return</p> <p>: (SNode) the derived child node</p> <p><code>dynamic</code> nodes acts like <code>std::vector</code> in C++ or <code>list</code> in Python.
Taichi's dynamic memory allocation system allocates its memory on the
fly.</p> <p>The following places a 1-D dynamic field of maximum size <code>16</code>:</p> <div class="language- extra-class"><pre><code>ti.root.dynamic(ti.i, 16).place(x)
</code></pre></div><p>:::</p> <p>::: {.function}
snode.bitmasked
:::</p> <p>::: {.function}
snode.pointer
:::</p> <p>::: {.function}
snode.hash</p> <p>TODO: add descriptions here
:::</p> <h2 id="working-with-dynamic-snodes"><a href="#working-with-dynamic-snodes" class="header-anchor">#</a> Working with <code>dynamic</code> SNodes</h2> <p>::: {.function}
ti.length(snode, indices)</p> <p>parameter snode</p> <p>: (SNode, dynamic)</p> <p>parameter indices</p> <p>: (scalar or tuple of scalars) the <code>dynamic</code> node indices</p> <p>return</p> <p>: (int32) the current size of the dynamic node
:::</p> <p>::: {.function}
ti.append(snode, indices, val)</p> <p>parameter snode</p> <p>: (SNode, dynamic)</p> <p>parameter indices</p> <p>: (scalar or tuple of scalars) the <code>dynamic</code> node indices</p> <p>parameter val</p> <p>: (depends on SNode data type) value to store</p> <p>return</p> <p>: (int32) the size of the dynamic node, before appending</p> <p>Inserts <code>val</code> into the <code>dynamic</code> node with indices <code>indices</code>.
:::</p> <h2 id="taichi-fields-like-powers-of-two"><a href="#taichi-fields-like-powers-of-two" class="header-anchor">#</a> Taichi fields like powers of two</h2> <p>Non-power-of-two field dimensions are promoted into powers of two and
thus these fields will occupy more virtual address space. For example, a
(dense) field of size <code>(18, 65)</code> will be materialized as <code>(32, 128)</code>.</p> <h2 id="indices"><a href="#indices" class="header-anchor">#</a> Indices</h2> <p>::: {.attribute}
ti.i
:::</p> <p>::: {.attribute}
ti.j
:::</p> <p>::: {.attribute}
ti.k
:::</p> <p>::: {.attribute}
ti.ij
:::</p> <p>::: {.attribute}
ti.ji
:::</p> <p>::: {.attribute}
ti.jk
:::</p> <p>::: {.attribute}
ti.kj
:::</p> <p>::: {.attribute}
ti.ik
:::</p> <p>::: {.attribute}
ti.ki
:::</p> <p>::: {.attribute}
ti.ijk
:::</p> <p>::: {.attribute}
ti.ijkl
:::</p> <p>::: {.function}
ti.indices(a, b, ...)
:::</p> <p>(TODO)</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/taichi-dev/taichi.graphics/edit/master/website/docs/develop/documentation/api/snode.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/22/2020, 1:51:49 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/develop/documentation/api/atomic.html" class="prev">
        Atomic operations
      </a></span> <span class="next"><a href="/docs/develop/documentation/misc/gui.html">
        GUI system
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.28bfd1c3.js" defer></script><script src="/assets/js/5.80df7d3d.js" defer></script><script src="/assets/js/44.6f655fd0.js" defer></script>
  </body>
</html>
