<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Structural nodes (SNodes) | Taichi</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/taichi.graphics/logo.png">
    <meta name="description" content="Taichi编程语言">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="og:locale" content="en_US">
    <link rel="preload" href="/taichi.graphics/assets/css/0.styles.bffba545.css" as="style"><link rel="preload" href="/taichi.graphics/assets/js/app.e92ab0b3.js" as="script"><link rel="preload" href="/taichi.graphics/assets/js/5.c27725d5.js" as="script"><link rel="preload" href="/taichi.graphics/assets/js/86.071be261.js" as="script"><link rel="prefetch" href="/taichi.graphics/assets/js/1.2fddad2b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/10.29b7e9bb.js"><link rel="prefetch" href="/taichi.graphics/assets/js/100.0e500066.js"><link rel="prefetch" href="/taichi.graphics/assets/js/101.972aea70.js"><link rel="prefetch" href="/taichi.graphics/assets/js/102.54ced4d8.js"><link rel="prefetch" href="/taichi.graphics/assets/js/103.fd18c559.js"><link rel="prefetch" href="/taichi.graphics/assets/js/104.a5486ebd.js"><link rel="prefetch" href="/taichi.graphics/assets/js/105.3a9dba10.js"><link rel="prefetch" href="/taichi.graphics/assets/js/106.4404c7cd.js"><link rel="prefetch" href="/taichi.graphics/assets/js/107.42672f53.js"><link rel="prefetch" href="/taichi.graphics/assets/js/108.d391f739.js"><link rel="prefetch" href="/taichi.graphics/assets/js/109.f8236d1f.js"><link rel="prefetch" href="/taichi.graphics/assets/js/11.1a41e7b9.js"><link rel="prefetch" href="/taichi.graphics/assets/js/110.7b5aa8ab.js"><link rel="prefetch" href="/taichi.graphics/assets/js/12.6e75473b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/13.36c26ad3.js"><link rel="prefetch" href="/taichi.graphics/assets/js/14.10153e06.js"><link rel="prefetch" href="/taichi.graphics/assets/js/15.cc7fe92e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/16.a6185e59.js"><link rel="prefetch" href="/taichi.graphics/assets/js/17.b8ea0319.js"><link rel="prefetch" href="/taichi.graphics/assets/js/18.9b475f36.js"><link rel="prefetch" href="/taichi.graphics/assets/js/19.eea10d15.js"><link rel="prefetch" href="/taichi.graphics/assets/js/2.a77af3fa.js"><link rel="prefetch" href="/taichi.graphics/assets/js/20.41e26329.js"><link rel="prefetch" href="/taichi.graphics/assets/js/21.63b4c0d7.js"><link rel="prefetch" href="/taichi.graphics/assets/js/22.4d230e9c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/23.d1252829.js"><link rel="prefetch" href="/taichi.graphics/assets/js/24.b9533092.js"><link rel="prefetch" href="/taichi.graphics/assets/js/25.f6ab3167.js"><link rel="prefetch" href="/taichi.graphics/assets/js/26.e72cb592.js"><link rel="prefetch" href="/taichi.graphics/assets/js/27.913cdb96.js"><link rel="prefetch" href="/taichi.graphics/assets/js/28.2e819948.js"><link rel="prefetch" href="/taichi.graphics/assets/js/29.7e9eba04.js"><link rel="prefetch" href="/taichi.graphics/assets/js/30.3e5d7572.js"><link rel="prefetch" href="/taichi.graphics/assets/js/31.29a5e349.js"><link rel="prefetch" href="/taichi.graphics/assets/js/32.aa7c159b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/33.458d2ffe.js"><link rel="prefetch" href="/taichi.graphics/assets/js/34.6ebad8ac.js"><link rel="prefetch" href="/taichi.graphics/assets/js/35.51d93466.js"><link rel="prefetch" href="/taichi.graphics/assets/js/36.3850b3d2.js"><link rel="prefetch" href="/taichi.graphics/assets/js/37.f6ebf91b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/38.23b31490.js"><link rel="prefetch" href="/taichi.graphics/assets/js/39.0d8ff11d.js"><link rel="prefetch" href="/taichi.graphics/assets/js/4.4c80ee98.js"><link rel="prefetch" href="/taichi.graphics/assets/js/40.e2684552.js"><link rel="prefetch" href="/taichi.graphics/assets/js/41.c349a50e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/42.d3a56374.js"><link rel="prefetch" href="/taichi.graphics/assets/js/43.8674e556.js"><link rel="prefetch" href="/taichi.graphics/assets/js/44.236ec4e2.js"><link rel="prefetch" href="/taichi.graphics/assets/js/45.138ac3fd.js"><link rel="prefetch" href="/taichi.graphics/assets/js/46.7c32a9f4.js"><link rel="prefetch" href="/taichi.graphics/assets/js/47.115907f7.js"><link rel="prefetch" href="/taichi.graphics/assets/js/48.e04cf6c8.js"><link rel="prefetch" href="/taichi.graphics/assets/js/49.a61766a7.js"><link rel="prefetch" href="/taichi.graphics/assets/js/50.245bd4ac.js"><link rel="prefetch" href="/taichi.graphics/assets/js/51.f1823d0e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/52.9f53ab1b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/53.7abf7037.js"><link rel="prefetch" href="/taichi.graphics/assets/js/54.85b3847b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/55.f09999f6.js"><link rel="prefetch" href="/taichi.graphics/assets/js/56.eee07124.js"><link rel="prefetch" href="/taichi.graphics/assets/js/57.197a2c38.js"><link rel="prefetch" href="/taichi.graphics/assets/js/58.36dfbc83.js"><link rel="prefetch" href="/taichi.graphics/assets/js/59.5a80519c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/6.3ddc5c87.js"><link rel="prefetch" href="/taichi.graphics/assets/js/60.81da000c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/61.6e35083e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/62.acf736b2.js"><link rel="prefetch" href="/taichi.graphics/assets/js/63.7b19cba0.js"><link rel="prefetch" href="/taichi.graphics/assets/js/64.3e6929ff.js"><link rel="prefetch" href="/taichi.graphics/assets/js/65.64e32317.js"><link rel="prefetch" href="/taichi.graphics/assets/js/66.3219104e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/67.fdf9d9cf.js"><link rel="prefetch" href="/taichi.graphics/assets/js/68.236d04b5.js"><link rel="prefetch" href="/taichi.graphics/assets/js/69.e19d51b5.js"><link rel="prefetch" href="/taichi.graphics/assets/js/7.745809f0.js"><link rel="prefetch" href="/taichi.graphics/assets/js/70.028ce84d.js"><link rel="prefetch" href="/taichi.graphics/assets/js/71.18f13d9b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/72.a20ec46b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/73.1bc168b2.js"><link rel="prefetch" href="/taichi.graphics/assets/js/74.334e01fa.js"><link rel="prefetch" href="/taichi.graphics/assets/js/75.4882c41c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/76.58960bca.js"><link rel="prefetch" href="/taichi.graphics/assets/js/77.15afdad1.js"><link rel="prefetch" href="/taichi.graphics/assets/js/78.29ad5f7a.js"><link rel="prefetch" href="/taichi.graphics/assets/js/79.9217bc7b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/8.7b083a2d.js"><link rel="prefetch" href="/taichi.graphics/assets/js/80.df6a55cc.js"><link rel="prefetch" href="/taichi.graphics/assets/js/81.87d43a05.js"><link rel="prefetch" href="/taichi.graphics/assets/js/82.b1d4c82d.js"><link rel="prefetch" href="/taichi.graphics/assets/js/83.f3b02ad5.js"><link rel="prefetch" href="/taichi.graphics/assets/js/84.e5fdbd44.js"><link rel="prefetch" href="/taichi.graphics/assets/js/85.270782ba.js"><link rel="prefetch" href="/taichi.graphics/assets/js/87.b613aeab.js"><link rel="prefetch" href="/taichi.graphics/assets/js/88.837089c3.js"><link rel="prefetch" href="/taichi.graphics/assets/js/89.075e131e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/9.b39aca62.js"><link rel="prefetch" href="/taichi.graphics/assets/js/90.20915b3d.js"><link rel="prefetch" href="/taichi.graphics/assets/js/91.2ec8bc7c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/92.c5e2438c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/93.ec74e5d0.js"><link rel="prefetch" href="/taichi.graphics/assets/js/94.455b9a03.js"><link rel="prefetch" href="/taichi.graphics/assets/js/95.4c4d572f.js"><link rel="prefetch" href="/taichi.graphics/assets/js/96.4cf8c06c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/97.0c884666.js"><link rel="prefetch" href="/taichi.graphics/assets/js/98.3a2cd148.js"><link rel="prefetch" href="/taichi.graphics/assets/js/99.d9864c18.js">
    <link rel="stylesheet" href="/taichi.graphics/assets/css/0.styles.bffba545.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/taichi.graphics/zh/" class="home-link router-link-active"><img src="/taichi.graphics/logo_medium.png" alt="Taichi" class="logo"> <span class="site-name can-hide">Taichi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/taichi.graphics/zh/documentation/overview/overview.html" class="nav-link">
  文档
</a></div><div class="nav-item"><a href="/taichi.graphics/zh/tutorials/" class="nav-link">
  教程
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          探索
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/zh/gallery/" class="nav-link">
  画廊
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/zh/research/" class="nav-link">
  研究
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/zh/playground/" class="nav-link">
  游乐场
</a></li></ul></li><li class="dropdown-item"><h4>
          资源
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/zh/contribution/" class="nav-link">
  贡献指南
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/zh/events/" class="nav-link">
  活动
</a></li><li class="dropdown-subitem"><a href="https://github.com/taichi-dev/taichi/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  更新日志
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          常见问题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/zh/faq/" class="nav-link">
  FAQ
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://forum.taichi.graphics/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  论坛
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/taichi.graphics/documentation/api/snode.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/taichi.graphics/zh/documentation/api/snode.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/taichi-dev/taichi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/taichi.graphics/zh/documentation/overview/overview.html" class="nav-link">
  文档
</a></div><div class="nav-item"><a href="/taichi.graphics/zh/tutorials/" class="nav-link">
  教程
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          探索
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/zh/gallery/" class="nav-link">
  画廊
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/zh/research/" class="nav-link">
  研究
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/zh/playground/" class="nav-link">
  游乐场
</a></li></ul></li><li class="dropdown-item"><h4>
          资源
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/zh/contribution/" class="nav-link">
  贡献指南
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/zh/events/" class="nav-link">
  活动
</a></li><li class="dropdown-subitem"><a href="https://github.com/taichi-dev/taichi/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  更新日志
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          常见问题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/zh/faq/" class="nav-link">
  FAQ
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://forum.taichi.graphics/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  论坛
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/taichi.graphics/documentation/api/snode.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/taichi.graphics/zh/documentation/api/snode.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/taichi-dev/taichi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>概览</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基本概念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高级编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>API 参考手册</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/taichi.graphics/zh/documentation/api/field.html" class="sidebar-link">Field</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/field.html#instance-methods" class="sidebar-link">Instance Methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/field.html#to_numpy" class="sidebar-link">to_numpy</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/field.html#from_numpy" class="sidebar-link">from_numpy</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/field.html#to_torch" class="sidebar-link">to_torch</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/field.html#from_torch" class="sidebar-link">from_torch</a></li></ul></li></ul></li><li><a href="/taichi.graphics/zh/documentation/api/ti.html" class="sidebar-link">ti</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/ti.html#static-functions" class="sidebar-link">Static Functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/ti.html#block_dim" class="sidebar-link">block_dim</a></li></ul></li></ul></li><li><a href="/taichi.graphics/zh/documentation/api/scalar_field.html" class="sidebar-link">Scalar fields</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/scalar_field.html#declaration" class="sidebar-link">Declaration</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/scalar_field.html#accessing-components" class="sidebar-link">Accessing components</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/scalar_field.html#meta-data" class="sidebar-link">Meta data</a></li></ul></li><li><a href="/taichi.graphics/zh/documentation/api/vector.html" class="sidebar-link">Vectors</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/vector.html#declaration" class="sidebar-link">Declaration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/vector.html#as-global-vector-fields" class="sidebar-link">As global vector fields</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/vector.html#as-a-temporary-local-variable" class="sidebar-link">As a temporary local variable</a></li></ul></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/vector.html#accessing-components" class="sidebar-link">Accessing components</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/vector.html#as-global-vector-fields-2" class="sidebar-link">As global vector fields</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/vector.html#as-a-temporary-local-variable-2" class="sidebar-link">As a temporary local variable</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/vector.html#xyzw-vector-component-accessors" class="sidebar-link">XYZW vector component accessors</a></li></ul></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/vector.html#methods" class="sidebar-link">Methods</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/vector.html#metadata" class="sidebar-link">Metadata</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/vector.html#element-wise-operations-wip" class="sidebar-link">Element-wise operations (WIP)</a></li></ul></li><li><a href="/taichi.graphics/zh/documentation/api/matrix.html" class="sidebar-link">Matrices</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/matrix.html#declaration" class="sidebar-link">Declaration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/matrix.html#as-global-matrix-fields" class="sidebar-link">As global matrix fields</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/matrix.html#as-a-temporary-local-variable" class="sidebar-link">As a temporary local variable</a></li></ul></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/matrix.html#accessing-components" class="sidebar-link">Accessing components</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/matrix.html#as-global-matrix-fields-2" class="sidebar-link">As global matrix fields</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/matrix.html#as-a-temporary-local-variable-2" class="sidebar-link">As a temporary local variable</a></li></ul></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/matrix.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/taichi.graphics/zh/documentation/api/arithmetics.html" class="sidebar-link">Scalar operations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/arithmetics.html#operators" class="sidebar-link">Operators</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/arithmetics.html#arithmetic-operators" class="sidebar-link">Arithmetic operators</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/arithmetics.html#logic-operators" class="sidebar-link">Logic operators</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/arithmetics.html#bitwise-operators" class="sidebar-link">Bitwise operators</a></li></ul></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/arithmetics.html#functions" class="sidebar-link">Functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/arithmetics.html#trigonometric-functions" class="sidebar-link">Trigonometric functions</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/arithmetics.html#other-arithmetic-functions" class="sidebar-link">Other arithmetic functions</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/arithmetics.html#casting-types" class="sidebar-link">Casting types</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/arithmetics.html#builtin-alike-functions" class="sidebar-link">Builtin-alike functions</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/arithmetics.html#random-number-generator" class="sidebar-link">Random number generator</a></li></ul></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/arithmetics.html#element-wise-arithmetics-for-vectors-and-matrices" class="sidebar-link">Element-wise arithmetics for vectors and matrices</a></li></ul></li><li><a href="/taichi.graphics/zh/documentation/api/atomic.html" class="sidebar-link">Atomic operations</a></li><li><a href="/taichi.graphics/zh/documentation/api/snode.html" aria-current="page" class="active sidebar-link">Structural nodes (SNodes)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/snode.html#node-types" class="sidebar-link">Node types</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/snode.html#working-with-dynamic-snodes" class="sidebar-link">Working with dynamic SNodes</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/snode.html#taichi-fields-like-powers-of-two" class="sidebar-link">Taichi fields like powers of two</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/zh/documentation/api/snode.html#indices" class="sidebar-link">Indices</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>杂项</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>致谢</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>遗留系统</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="structural-nodes-snodes"><a href="#structural-nodes-snodes" class="header-anchor">#</a> Structural nodes (SNodes)</h1> <p>After writing the computation code, the user needs to specify the
internal data structure hierarchy. Specifying a data structure includes
choices at both the macro level, dictating how the data structure
components nest with each other and the way they represent sparsity, and
the micro level, dictating how data are grouped together (e.g. structure
of arrays vs. array of structures). Taichi provides <em>Structural Nodes
(SNodes)</em> to compose the hierarchy and particular properties. These
constructs and their semantics are listed below:</p> <ul><li>dense: A fixed-length contiguous array.</li> <li>bitmasked: This is similar to dense, but it also uses a mask to
maintain sparsity information, one bit per child.</li> <li>pointer: Store pointers instead of the whole structure to save
memory and maintain sparsity.</li> <li>dynamic: Variable-length array, with a predefined maximum length. It
serves the role of <code>std::vector</code> in C++ or <code>list</code> in Python, and can
be used to maintain objects (e.g. particles) contained in a block.</li></ul> <div class="custom-block note"><p class="custom-block-title">注解</p> <p>Supported SNode types on each backend:</p> <table><thead><tr><th style="text-align:center;">SNode</th> <th style="text-align:center;">CPU/CUDA</th> <th style="text-align:center;">OpenGL</th> <th style="text-align:center;">Metal</th> <th style="text-align:center;">C source</th></tr></thead> <tbody><tr><td style="text-align:center;">dense</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">OK</td></tr> <tr><td style="text-align:center;">bitmasked</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">N/A</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">N/A</td></tr> <tr><td style="text-align:center;">pointer</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">N/A</td> <td style="text-align:center;">N/A</td> <td style="text-align:center;">N/A</td></tr> <tr><td style="text-align:center;">dynamic</td> <td style="text-align:center;">OK</td> <td style="text-align:center;">PAR</td> <td style="text-align:center;">N/A</td> <td style="text-align:center;">N/A</td></tr></tbody></table> <p>(OK: supported; PAR: partial support; N/A: not available)</p></div> <p>See <code>layout</code>{.interpreted-text role=&quot;ref&quot;} for more details. <code>ti.root</code>
is the root node of the data structure.</p> <p>::: {.function}
snode.place(x, ...)</p> <p>parameter snode</p> <p>: (SNode) where to place</p> <p>parameter a</p> <p>: (ti.field) field(s) to be placed</p> <p>return</p> <p>: (SNode) the <code>snode</code> itself</p> <p>The following code places two 0-D fields named <code>x</code> and <code>y</code>:</p> <div class="language- extra-class"><pre><code>x = ti.field(dtype=ti.i32)
y = ti.field(dtype=ti.f32)
ti.root.place(x, y)
assert x.snode.parent == y.snode.parent
</code></pre></div><p>:::</p> <p>::: {.function}
field.shape</p> <p>parameter a</p> <p>: (ti.field)</p> <p>return</p> <p>: (tuple of integers) the shape of field</p> <p>Equivalent to <code>field.snode.shape</code>.</p> <p>For example,</p> <div class="language- extra-class"><pre><code>ti.root.dense(ti.ijk, (3, 5, 4)).place(x)
x.shape  # returns (3, 5, 4)
</code></pre></div><p>:::</p> <p>::: {.function}
field.snode</p> <p>parameter a</p> <p>: (ti.field)</p> <p>return</p> <p>: (SNode) the structual node where <code>field</code> is placed</p> <div class="language-{=html} extra-class"><pre class="language-text"><code>&lt;!-- --&gt;
</code></pre></div><div class="language- extra-class"><pre><code>x = ti.field(dtype=ti.i32)
y = ti.field(dtype=ti.f32)
blk1 = ti.root.dense(ti.i, 4)
blk1.place(x, y)
assert x.snode == blk1
</code></pre></div><p>:::</p> <p>::: {.function}
snode.shape</p> <p>parameter snode</p> <p>: (SNode)</p> <p>return</p> <p>: (tuple) the size of node along that axis</p> <div class="language-{=html} extra-class"><pre class="language-text"><code>&lt;!-- --&gt;
</code></pre></div><div class="language- extra-class"><pre><code>blk1 = ti.root
blk2 = blk1.dense(ti.i,  3)
blk3 = blk2.dense(ti.jk, (5, 2))
blk4 = blk3.dense(ti.k,  2)
blk1.shape  # ()
blk2.shape  # (3, )
blk3.shape  # (3, 5, 2)
blk4.shape  # (3, 5, 4)
</code></pre></div><p>:::</p> <p>::: {.function}
snode.parent(n = 1)</p> <p>parameter snode</p> <p>: (SNode)</p> <p>parameter n</p> <p>: (optional, scalar) the number of steps, i.e. <code>n=1</code> for parent, <code>n=2</code>
grandparent, etc.</p> <p>return</p> <p>: (SNode) the parent node of <code>snode</code></p> <div class="language-{=html} extra-class"><pre class="language-text"><code>&lt;!-- --&gt;
</code></pre></div><div class="language- extra-class"><pre><code>blk1 = ti.root.dense(ti.i, 8)
blk2 = blk1.dense(ti.j, 4)
blk3 = blk2.bitmasked(ti.k, 6)
blk1.parent()  # ti.root
blk2.parent()  # blk1
blk3.parent()  # blk2
blk3.parent(1) # blk2
blk3.parent(2) # blk1
blk3.parent(3) # ti.root
blk3.parent(4) # None
</code></pre></div><p>:::</p> <h2 id="node-types"><a href="#node-types" class="header-anchor">#</a> Node types</h2> <p>::: {.function}
snode.dense(indices, shape)</p> <p>parameter snode</p> <p>: (SNode) parent node where the child is derived from</p> <p>parameter indices</p> <p>: (Index or Indices) indices used for this node</p> <p>parameter shape</p> <p>: (scalar or tuple) shape of the field</p> <p>return</p> <p>: (SNode) the derived child node</p> <p>The following code places a 1-D field of size <code>3</code>:</p> <div class="language- extra-class"><pre><code>x = ti.field(dtype=ti.i32)
ti.root.dense(ti.i, 3).place(x)
</code></pre></div><p>The following code places a 2-D field of shape <code>(3, 4)</code>:</p> <div class="language- extra-class"><pre><code>x = ti.field(dtype=ti.i32)
ti.root.dense(ti.ij, (3, 4)).place(x)
</code></pre></div><div class="custom-block note"><p class="custom-block-title">注解</p> <p>If <code>shape</code> is a scalar and there are multiple indices, then <code>shape</code> will
be automatically expanded to fit the number of indices. For example,</p> <div class="language- extra-class"><pre><code>snode.dense(ti.ijk, 3)
</code></pre></div><p>is equivalent to</p> <div class="language- extra-class"><pre><code>snode.dense(ti.ijk, (3, 3, 3))
</code></pre></div></div> <p>:::</p> <p>::: {.function}
snode.dynamic(index, size, chunk_size = None)</p> <p>parameter snode</p> <p>: (SNode) parent node where the child is derived from</p> <p>parameter index</p> <p>: (Index) the <code>dynamic</code> node indices</p> <p>parameter size</p> <p>: (scalar) the maximum size of the dynamic node</p> <p>parameter chunk_size</p> <p>: (optional, scalar) the number of elements in each dynamic memory
allocation chunk</p> <p>return</p> <p>: (SNode) the derived child node</p> <p><code>dynamic</code> nodes acts like <code>std::vector</code> in C++ or <code>list</code> in Python.
Taichi's dynamic memory allocation system allocates its memory on the
fly.</p> <p>The following places a 1-D dynamic field of maximum size <code>16</code>:</p> <div class="language- extra-class"><pre><code>ti.root.dynamic(ti.i, 16).place(x)
</code></pre></div><p>:::</p> <p>::: {.function}
snode.bitmasked
:::</p> <p>::: {.function}
snode.pointer
:::</p> <p>::: {.function}
snode.hash</p> <p>TODO: add descriptions here
:::</p> <h2 id="working-with-dynamic-snodes"><a href="#working-with-dynamic-snodes" class="header-anchor">#</a> Working with <code>dynamic</code> SNodes</h2> <p>::: {.function}
ti.length(snode, indices)</p> <p>parameter snode</p> <p>: (SNode, dynamic)</p> <p>parameter indices</p> <p>: (scalar or tuple of scalars) the <code>dynamic</code> node indices</p> <p>return</p> <p>: (int32) the current size of the dynamic node
:::</p> <p>::: {.function}
ti.append(snode, indices, val)</p> <p>parameter snode</p> <p>: (SNode, dynamic)</p> <p>parameter indices</p> <p>: (scalar or tuple of scalars) the <code>dynamic</code> node indices</p> <p>parameter val</p> <p>: (depends on SNode data type) value to store</p> <p>return</p> <p>: (int32) the size of the dynamic node, before appending</p> <p>Inserts <code>val</code> into the <code>dynamic</code> node with indices <code>indices</code>.
:::</p> <h2 id="taichi-fields-like-powers-of-two"><a href="#taichi-fields-like-powers-of-two" class="header-anchor">#</a> Taichi fields like powers of two</h2> <p>Non-power-of-two field dimensions are promoted into powers of two and
thus these fields will occupy more virtual address space. For example, a
(dense) field of size <code>(18, 65)</code> will be materialized as <code>(32, 128)</code>.</p> <h2 id="indices"><a href="#indices" class="header-anchor">#</a> Indices</h2> <p>::: {.attribute}
ti.i
:::</p> <p>::: {.attribute}
ti.j
:::</p> <p>::: {.attribute}
ti.k
:::</p> <p>::: {.attribute}
ti.ij
:::</p> <p>::: {.attribute}
ti.ji
:::</p> <p>::: {.attribute}
ti.jk
:::</p> <p>::: {.attribute}
ti.kj
:::</p> <p>::: {.attribute}
ti.ik
:::</p> <p>::: {.attribute}
ti.ki
:::</p> <p>::: {.attribute}
ti.ijk
:::</p> <p>::: {.attribute}
ti.ijkl
:::</p> <p>::: {.function}
ti.indices(a, b, ...)
:::</p> <p>(TODO)</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/taichi-dev/taichi/edit/master/zh/documentation/api/snode.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2020/9/27 下午11:27:11</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/taichi.graphics/zh/documentation/api/atomic.html" class="prev">
        Atomic operations
      </a></span> <span class="next"><a href="/taichi.graphics/zh/documentation/misc/gui.html">
        GUI system
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/taichi.graphics/assets/js/app.e92ab0b3.js" defer></script><script src="/taichi.graphics/assets/js/5.c27725d5.js" defer></script><script src="/taichi.graphics/assets/js/86.071be261.js" defer></script>
  </body>
</html>
