<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Debugging | Taichi</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/taichi.graphics/logo.png">
    <meta name="description" content="The Taichi Programming Language">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="og:locale" content="en_US">
    <link rel="preload" href="/taichi.graphics/assets/css/0.styles.a0c2b1d3.css" as="style"><link rel="preload" href="/taichi.graphics/assets/js/app.5fd9acd9.js" as="script"><link rel="preload" href="/taichi.graphics/assets/js/5.bcfffdd2.js" as="script"><link rel="preload" href="/taichi.graphics/assets/js/53.62fe4cf9.js" as="script"><link rel="prefetch" href="/taichi.graphics/assets/js/1.2fddad2b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/10.29b7e9bb.js"><link rel="prefetch" href="/taichi.graphics/assets/js/100.d2ce417e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/101.c72a2ad1.js"><link rel="prefetch" href="/taichi.graphics/assets/js/102.5166abc6.js"><link rel="prefetch" href="/taichi.graphics/assets/js/103.8ce52a7c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/104.b24e3642.js"><link rel="prefetch" href="/taichi.graphics/assets/js/105.844dabf3.js"><link rel="prefetch" href="/taichi.graphics/assets/js/106.fb60d7ec.js"><link rel="prefetch" href="/taichi.graphics/assets/js/107.7da37e7d.js"><link rel="prefetch" href="/taichi.graphics/assets/js/108.90f05c7d.js"><link rel="prefetch" href="/taichi.graphics/assets/js/109.ae674995.js"><link rel="prefetch" href="/taichi.graphics/assets/js/11.1a41e7b9.js"><link rel="prefetch" href="/taichi.graphics/assets/js/110.126e58ee.js"><link rel="prefetch" href="/taichi.graphics/assets/js/12.6e75473b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/13.36c26ad3.js"><link rel="prefetch" href="/taichi.graphics/assets/js/14.10153e06.js"><link rel="prefetch" href="/taichi.graphics/assets/js/15.cc7fe92e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/16.a6185e59.js"><link rel="prefetch" href="/taichi.graphics/assets/js/17.b8ea0319.js"><link rel="prefetch" href="/taichi.graphics/assets/js/18.9b475f36.js"><link rel="prefetch" href="/taichi.graphics/assets/js/19.eea10d15.js"><link rel="prefetch" href="/taichi.graphics/assets/js/2.a77af3fa.js"><link rel="prefetch" href="/taichi.graphics/assets/js/20.41e26329.js"><link rel="prefetch" href="/taichi.graphics/assets/js/21.63b4c0d7.js"><link rel="prefetch" href="/taichi.graphics/assets/js/22.4d230e9c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/23.98266027.js"><link rel="prefetch" href="/taichi.graphics/assets/js/24.65588494.js"><link rel="prefetch" href="/taichi.graphics/assets/js/25.67b648ba.js"><link rel="prefetch" href="/taichi.graphics/assets/js/26.ff6742bd.js"><link rel="prefetch" href="/taichi.graphics/assets/js/27.831312b3.js"><link rel="prefetch" href="/taichi.graphics/assets/js/28.75d364f8.js"><link rel="prefetch" href="/taichi.graphics/assets/js/29.2cb9d68a.js"><link rel="prefetch" href="/taichi.graphics/assets/js/30.42c482d7.js"><link rel="prefetch" href="/taichi.graphics/assets/js/31.09a465b5.js"><link rel="prefetch" href="/taichi.graphics/assets/js/32.0deccd74.js"><link rel="prefetch" href="/taichi.graphics/assets/js/33.3421a03d.js"><link rel="prefetch" href="/taichi.graphics/assets/js/34.c083fd19.js"><link rel="prefetch" href="/taichi.graphics/assets/js/35.b02cc8d8.js"><link rel="prefetch" href="/taichi.graphics/assets/js/36.8843ac4e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/37.ab4e86b6.js"><link rel="prefetch" href="/taichi.graphics/assets/js/38.e7c90d2c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/39.e3a79121.js"><link rel="prefetch" href="/taichi.graphics/assets/js/4.44343e6d.js"><link rel="prefetch" href="/taichi.graphics/assets/js/40.ebc025fe.js"><link rel="prefetch" href="/taichi.graphics/assets/js/41.45c64b1e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/42.6102a0eb.js"><link rel="prefetch" href="/taichi.graphics/assets/js/43.ab5a3a64.js"><link rel="prefetch" href="/taichi.graphics/assets/js/44.1df4001f.js"><link rel="prefetch" href="/taichi.graphics/assets/js/45.2bb2a01e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/46.00b0e1b6.js"><link rel="prefetch" href="/taichi.graphics/assets/js/47.e3466de5.js"><link rel="prefetch" href="/taichi.graphics/assets/js/48.60ab7ce2.js"><link rel="prefetch" href="/taichi.graphics/assets/js/49.f670a1b1.js"><link rel="prefetch" href="/taichi.graphics/assets/js/50.a951aa62.js"><link rel="prefetch" href="/taichi.graphics/assets/js/51.0031c637.js"><link rel="prefetch" href="/taichi.graphics/assets/js/52.9c3f6fee.js"><link rel="prefetch" href="/taichi.graphics/assets/js/54.e132c366.js"><link rel="prefetch" href="/taichi.graphics/assets/js/55.094c258c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/56.c84ddb1c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/57.5bda96fb.js"><link rel="prefetch" href="/taichi.graphics/assets/js/58.072cb162.js"><link rel="prefetch" href="/taichi.graphics/assets/js/59.392c5033.js"><link rel="prefetch" href="/taichi.graphics/assets/js/6.3a290440.js"><link rel="prefetch" href="/taichi.graphics/assets/js/60.5576fe76.js"><link rel="prefetch" href="/taichi.graphics/assets/js/61.3e7bdf25.js"><link rel="prefetch" href="/taichi.graphics/assets/js/62.acf736b2.js"><link rel="prefetch" href="/taichi.graphics/assets/js/63.7b19cba0.js"><link rel="prefetch" href="/taichi.graphics/assets/js/64.3e6929ff.js"><link rel="prefetch" href="/taichi.graphics/assets/js/65.64e32317.js"><link rel="prefetch" href="/taichi.graphics/assets/js/66.3219104e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/67.fdf9d9cf.js"><link rel="prefetch" href="/taichi.graphics/assets/js/68.236d04b5.js"><link rel="prefetch" href="/taichi.graphics/assets/js/69.e19d51b5.js"><link rel="prefetch" href="/taichi.graphics/assets/js/7.745809f0.js"><link rel="prefetch" href="/taichi.graphics/assets/js/70.028ce84d.js"><link rel="prefetch" href="/taichi.graphics/assets/js/71.18f13d9b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/72.568e269f.js"><link rel="prefetch" href="/taichi.graphics/assets/js/73.fac2947f.js"><link rel="prefetch" href="/taichi.graphics/assets/js/74.abce0a90.js"><link rel="prefetch" href="/taichi.graphics/assets/js/75.38f877c5.js"><link rel="prefetch" href="/taichi.graphics/assets/js/76.9f93811f.js"><link rel="prefetch" href="/taichi.graphics/assets/js/77.2d34cdfc.js"><link rel="prefetch" href="/taichi.graphics/assets/js/78.2688bb42.js"><link rel="prefetch" href="/taichi.graphics/assets/js/79.35bf4115.js"><link rel="prefetch" href="/taichi.graphics/assets/js/8.dd3cde34.js"><link rel="prefetch" href="/taichi.graphics/assets/js/80.68e2d39c.js"><link rel="prefetch" href="/taichi.graphics/assets/js/81.d000f8e5.js"><link rel="prefetch" href="/taichi.graphics/assets/js/82.3b73e891.js"><link rel="prefetch" href="/taichi.graphics/assets/js/83.15d1a982.js"><link rel="prefetch" href="/taichi.graphics/assets/js/84.148d646b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/85.7d0e3fc2.js"><link rel="prefetch" href="/taichi.graphics/assets/js/86.c44153b6.js"><link rel="prefetch" href="/taichi.graphics/assets/js/87.e61b6928.js"><link rel="prefetch" href="/taichi.graphics/assets/js/88.8181d34b.js"><link rel="prefetch" href="/taichi.graphics/assets/js/89.78c41e6e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/9.fcb249f1.js"><link rel="prefetch" href="/taichi.graphics/assets/js/90.675b3918.js"><link rel="prefetch" href="/taichi.graphics/assets/js/91.35f7c637.js"><link rel="prefetch" href="/taichi.graphics/assets/js/92.12fb5818.js"><link rel="prefetch" href="/taichi.graphics/assets/js/93.0bb2962e.js"><link rel="prefetch" href="/taichi.graphics/assets/js/94.b7bae057.js"><link rel="prefetch" href="/taichi.graphics/assets/js/95.8790e3f7.js"><link rel="prefetch" href="/taichi.graphics/assets/js/96.1e792bf2.js"><link rel="prefetch" href="/taichi.graphics/assets/js/97.59fbeb1a.js"><link rel="prefetch" href="/taichi.graphics/assets/js/98.810c5899.js"><link rel="prefetch" href="/taichi.graphics/assets/js/99.c6371f9f.js">
    <link rel="stylesheet" href="/taichi.graphics/assets/css/0.styles.a0c2b1d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/taichi.graphics/" class="home-link router-link-active"><img src="/taichi.graphics/logo_medium.png" alt="Taichi" class="logo"> <span class="site-name can-hide">Taichi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow down"></span></button> <button type="button" aria-label="Documentation" class="mobile-dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/taichi.graphics/versioned_docs/develop/documentation/overview/overview.html" class="nav-link">
  develop
</a></li></ul></div></div><div class="nav-item"><a href="/taichi.graphics/tutorials/" class="nav-link">
  Tutorials
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn More" class="mobile-dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Explore
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/gallery/" class="nav-link">
  Gallery
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/research/" class="nav-link">
  Research
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/playground/" class="nav-link">
  Playground
</a></li></ul></li><li class="dropdown-item"><h4>
          Resources
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/contribution/" class="nav-link">
  Contribution Guide
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/events/" class="nav-link">
  Events
</a></li><li class="dropdown-subitem"><a href="https://github.com/taichi-dev/taichi/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          FAQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/faq/" class="nav-link">
  FAQ
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://forum.taichi.graphics/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/taichi.graphics/zh/versioned_docs/develop/documentation/misc/debugging.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/taichi-dev/taichi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow down"></span></button> <button type="button" aria-label="Documentation" class="mobile-dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/taichi.graphics/versioned_docs/develop/documentation/overview/overview.html" class="nav-link">
  develop
</a></li></ul></div></div><div class="nav-item"><a href="/taichi.graphics/tutorials/" class="nav-link">
  Tutorials
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn More" class="mobile-dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Explore
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/gallery/" class="nav-link">
  Gallery
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/research/" class="nav-link">
  Research
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/playground/" class="nav-link">
  Playground
</a></li></ul></li><li class="dropdown-item"><h4>
          Resources
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/contribution/" class="nav-link">
  Contribution Guide
</a></li><li class="dropdown-subitem"><a href="/taichi.graphics/events/" class="nav-link">
  Events
</a></li><li class="dropdown-subitem"><a href="https://github.com/taichi-dev/taichi/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          FAQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/taichi.graphics/faq/" class="nav-link">
  FAQ
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://forum.taichi.graphics/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/taichi.graphics/zh/versioned_docs/develop/documentation/misc/debugging.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/taichi-dev/taichi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Basic Concepts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Advanced Programming</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>API References</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Miscellaneous</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/gui.html" class="sidebar-link">GUI system</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/gui.html#create-a-window" class="sidebar-link">Create a window</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/gui.html#paint-on-a-window" class="sidebar-link">Paint on a window</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/gui.html#event-processing" class="sidebar-link">Event processing</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/gui.html#gui-widgets" class="sidebar-link">GUI Widgets</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/gui.html#image-i-o" class="sidebar-link">Image I/O</a></li></ul></li><li><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html" aria-current="page" class="active sidebar-link">Debugging</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html#run-time-print-in-kernels" class="sidebar-link">Run-time print in kernels</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html#compile-time-ti-static-print" class="sidebar-link">Compile-time ti.static_print</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html#serial-execution" class="sidebar-link">Serial execution</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html#runtime-assert-in-kernel" class="sidebar-link">Runtime assert in kernel</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html#compile-time-ti-static-assert" class="sidebar-link">Compile-time ti.static_assert</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html#pretty-taichi-scope-traceback" class="sidebar-link">Pretty Taichi-scope traceback</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html#debugging-tips" class="sidebar-link">Debugging Tips</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html#static-type-system" class="sidebar-link">Static type system</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/debugging.html#advanced-optimization" class="sidebar-link">Advanced Optimization</a></li></ul></li></ul></li><li><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html" class="sidebar-link">Export your results</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html#export-images" class="sidebar-link">Export images</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html#export-images-using-ti-gui-show" class="sidebar-link">Export images using ti.GUI.show</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html#export-images-using-ti-imwrite" class="sidebar-link">Export images using ti.imwrite</a></li></ul></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html#export-videos" class="sidebar-link">Export videos</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html#install-ffmpeg" class="sidebar-link">Install ffmpeg</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html#install-ffmpeg-on-windows" class="sidebar-link">Install ffmpeg on Windows</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html#install-ffmpeg-on-linux" class="sidebar-link">Install ffmpeg on Linux</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html#install-ffmpeg-on-os-x" class="sidebar-link">Install ffmpeg on OS X</a></li></ul></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html#export-ply-files" class="sidebar-link">Export PLY files</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html#import-ply-files-into-houdini-and-blender" class="sidebar-link">Import ply files into Houdini and Blender</a></li></ul></li></ul></li><li><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/cli_utilities.html" class="sidebar-link">Command line utilities</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/cli_utilities.html#examples" class="sidebar-link">Examples</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/cli_utilities.html#changelog" class="sidebar-link">Changelog</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/cli_utilities.html#repl-shell" class="sidebar-link">REPL Shell</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/cli_utilities.html#system-information" class="sidebar-link">System information</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/cli_utilities.html#converting-pngs-to-video" class="sidebar-link">Converting PNGs to video</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/cli_utilities.html#converting-video-to-gif" class="sidebar-link">Converting video to GIF</a></li></ul></li><li><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/global_settings.html" class="sidebar-link">Global settings</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/global_settings.html#backends" class="sidebar-link">Backends</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/global_settings.html#compilation" class="sidebar-link">Compilation</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/global_settings.html#runtime" class="sidebar-link">Runtime</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/global_settings.html#logging" class="sidebar-link">Logging</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/global_settings.html#develop" class="sidebar-link">Develop</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/global_settings.html#specifying-ti-init-arguments-from-environment-variables" class="sidebar-link">Specifying ti.init arguments from environment variables</a></li></ul></li><li><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_kernels.html" class="sidebar-link">Export Taichi kernels to C source</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_kernels.html#the-workflow-of-exporting" class="sidebar-link">The workflow of exporting</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_kernels.html#export-yaml" class="sidebar-link">Export YAML</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_kernels.html#compose-yaml-into-a-single-c-file" class="sidebar-link">Compose YAML into a single C file</a></li></ul></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_kernels.html#calling-the-exported-kernels" class="sidebar-link">Calling the exported kernels</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_kernels.html#specifying-scalar-arguments" class="sidebar-link">Specifying scalar arguments</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_kernels.html#passing-external-arrays" class="sidebar-link">Passing external arrays</a></li></ul></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_kernels.html#taichi-js-wip" class="sidebar-link">Taichi.js (WIP)</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_kernels.html#calling-taichi-kernels-from-julia-wip" class="sidebar-link">Calling Taichi kernels from Julia (WIP)</a></li></ul></li><li><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/extension_libraries.html" class="sidebar-link">Extension libraries</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/extension_libraries.html#taichi-glsl" class="sidebar-link">Taichi GLSL</a></li><li class="sidebar-sub-header"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/extension_libraries.html#taichi-three" class="sidebar-link">Taichi THREE</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Acknowledgments</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Legacy</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="debugging"><a href="#debugging" class="header-anchor">#</a> Debugging</h1> <p>Debugging a parallel program is not easy, so Taichi provides builtin
utilities that could hopefully help you debug your Taichi program.</p> <h2 id="run-time-print-in-kernels"><a href="#run-time-print-in-kernels" class="header-anchor">#</a> Run-time <code>print</code> in kernels</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">print</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
</code></pre></div><p>Debug your program with <code>print()</code> in Taichi-scope. For example:</p> <div class="language-python extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-python"><code><span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>kernel</span>
<span class="token keyword">def</span> <span class="token function">inside_taichi_scope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> <span class="token number">233</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
    <span class="token comment">#=&gt; hello 233</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> x <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">)</span>
    <span class="token comment">#=&gt; hello 666</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token comment">#=&gt; hello233</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'world'</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token comment">#=&gt; hello233world233</span>

    m <span class="token operator">=</span> ti<span class="token punctuation">.</span>Matrix<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'m ='</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span>
    <span class="token comment">#=&gt; m = [[2, 3, 4], [5, 6, 7]]</span>

    v <span class="token operator">=</span> ti<span class="token punctuation">.</span>Vector<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'v ='</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
    <span class="token comment">#=&gt; v = [3, 4]</span>
</code></pre></div><p>For now, Taichi-scope <code>print</code> supports string, scalar, vector, and
matrix expressions as arguments. <code>print</code> in Taichi-scope may be a little
different from <code>print</code> in Python-scope. Please see details below.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>For the <strong>CPU and CUDA backend</strong>, <code>print</code> will not work in Graphical
Python Shells including IDLE and Jupyter notebook. This is because these
backends print the outputs to the console instead of the GUI. Use the
<strong>OpenGL or Metal backend</strong> if you wish to use <code>print</code> in IDLE /
Jupyter.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>For the <strong>CUDA backend</strong>, the printed result will not show up until
<code>ti.sync()</code> is called:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> taichi <span class="token keyword">as</span> ti
ti<span class="token punctuation">.</span>init<span class="token punctuation">(</span>arch<span class="token operator">=</span>ti<span class="token punctuation">.</span>cuda<span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>kernel</span>
<span class="token keyword">def</span> <span class="token function">kern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'inside kernel'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'before kernel'</span><span class="token punctuation">)</span>
kern<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'after kernel'</span><span class="token punctuation">)</span>
ti<span class="token punctuation">.</span>sync<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'after sync'</span><span class="token punctuation">)</span>
</code></pre></div><p>results in:</p> <div class="language- extra-class"><pre class="language-text"><code>before kernel
after kernel
inside kernel
after sync
</code></pre></div><p>Note that host access or program end will also implicitly invoke
<code>ti.sync()</code>.</p></div> <div class="custom-block note"><p class="custom-block-title">NOTE</p> <p>Note that <code>print</code> in Taichi-scope can only receive <strong>comma-separated
parameter</strong>. Neither f-string nor formatted string should be used. For
example:</p> <div class="language-python extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-python"><code><span class="token keyword">import</span> taichi <span class="token keyword">as</span> ti
ti<span class="token punctuation">.</span>init<span class="token punctuation">(</span>arch<span class="token operator">=</span>ti<span class="token punctuation">.</span>cpu<span class="token punctuation">)</span>
a <span class="token operator">=</span> ti<span class="token punctuation">.</span>field<span class="token punctuation">(</span>ti<span class="token punctuation">.</span>f32<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>


<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>kernel</span>
<span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'a[0] = '</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># right</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'a[0] = </span><span class="token interpolation"><span class="token punctuation">{</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span> <span class="token comment"># wrong, f-string is not supported</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;a[0] = %f&quot;</span> <span class="token operator">%</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># wrong, formatted string is not supported</span>

foo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></div> <h2 id="compile-time-ti-static-print"><a href="#compile-time-ti-static-print" class="header-anchor">#</a> Compile-time <code>ti.static_print</code></h2> <p>Sometimes it is useful to print Python-scope objects and constants like
data types or SNodes in Taichi-scope. So, similar to <code>ti.static</code> we
provide <code>ti.static_print</code> to print compile-time constants. It is similar
to Python-scope <code>print</code>.</p> <div class="language-python extra-class"><pre class="language-python"><code>x <span class="token operator">=</span> ti<span class="token punctuation">.</span>field<span class="token punctuation">(</span>ti<span class="token punctuation">.</span>f32<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> <span class="token number">1</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>kernel</span>
<span class="token keyword">def</span> <span class="token function">inside_taichi_scope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ti<span class="token punctuation">.</span>static_print<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
    <span class="token comment"># =&gt; 1</span>
    ti<span class="token punctuation">.</span>static_print<span class="token punctuation">(</span>x<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
    <span class="token comment"># =&gt; (2, 3)</span>
    ti<span class="token punctuation">.</span>static_print<span class="token punctuation">(</span>x<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span>
    <span class="token comment"># =&gt; DataType.float32</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            ti<span class="token punctuation">.</span>static_print<span class="token punctuation">(</span>i<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span>
            <span class="token comment"># =&gt; DataType.int32</span>
            <span class="token comment"># will only print once</span>
</code></pre></div><p>Unlike <code>print</code>, <code>ti.static_print</code> will only print the expression once at
compile-time, and therefore it has no runtime cost.</p> <h2 id="serial-execution"><a href="#serial-execution" class="header-anchor">#</a> Serial execution</h2> <p>The automatic parallelization feature of Taichi may lead to
undeterministic behaviors. For debugging purposes, it may be useful to
serialize program execution to get repeatable results and to diagnose
data races. When running your Taichi program on CPUs, you can initialize
Taichi to use a single thread using <code>cpu_max_num_threads=1</code>, so that the
whole program becomes serial and deterministic. For example,</p> <p><code>ti.init(arch=ti.cpu, cpu_max_num_threads=1)</code></p> <p>If you program works well in serial but not in parallel, check
parallelization-related issues such as data races.</p> <h2 id="runtime-assert-in-kernel"><a href="#runtime-assert-in-kernel" class="header-anchor">#</a> Runtime <code>assert</code> in kernel</h2> <p>Programmers may use <code>assert</code> statements in Taichi-scope. When the
assertion condition failed, a <code>RuntimeError</code> will be raised to indicate
the error.</p> <p>To make <code>assert</code> work, first make sure you are using the <strong>CPU
backend</strong>. For performance reason, <code>assert</code> only works when <code>debug</code> mode
is on, For example:</p> <div class="language-python extra-class"><pre class="language-python"><code>ti<span class="token punctuation">.</span>init<span class="token punctuation">(</span>arch<span class="token operator">=</span>ti<span class="token punctuation">.</span>cpu<span class="token punctuation">,</span> debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

x <span class="token operator">=</span> ti<span class="token punctuation">.</span>field<span class="token punctuation">(</span>ti<span class="token punctuation">.</span>f32<span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>kernel</span>
<span class="token keyword">def</span> <span class="token function">do_sqrt_all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> x<span class="token punctuation">:</span>
        <span class="token keyword">assert</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token number">0</span>
        x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> ti<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre></div><p>When you are done with debugging, simply set <code>debug=False</code>. Now <code>assert</code>
will be ignored and there will be no runtime overhead.</p> <h2 id="compile-time-ti-static-assert"><a href="#compile-time-ti-static-assert" class="header-anchor">#</a> Compile-time <code>ti.static_assert</code></h2> <div class="language-python extra-class"><pre class="language-python"><code>ti<span class="token punctuation">.</span>static_assert<span class="token punctuation">(</span>cond<span class="token punctuation">,</span> msg<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre></div><p>Like <code>ti.static_print</code>, we also provide a static version of <code>assert</code>:
<code>ti.static_assert</code>. It can be useful to make assertions on data types,
dimensionality, and shapes. It works whether <code>debug=True</code> is specified
or not. When an assertion fails, it will raise an <code>AssertionError</code>, just
like a Python-scope <code>assert</code>.</p> <p>For example:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>func</span>
<span class="token keyword">def</span> <span class="token function">copy</span><span class="token punctuation">(</span>dst<span class="token punctuation">:</span> ti<span class="token punctuation">.</span>template<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> src<span class="token punctuation">:</span> ti<span class="token punctuation">.</span>template<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ti<span class="token punctuation">.</span>static_assert<span class="token punctuation">(</span>dst<span class="token punctuation">.</span>shape <span class="token operator">==</span> src<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> <span class="token string">&quot;copy() needs src and dst fields to be same shape&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> I <span class="token keyword">in</span> ti<span class="token punctuation">.</span>grouped<span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">:</span>
        dst<span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token operator">=</span> src<span class="token punctuation">[</span>I<span class="token punctuation">]</span>
    <span class="token keyword">return</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span>
</code></pre></div><h2 id="pretty-taichi-scope-traceback"><a href="#pretty-taichi-scope-traceback" class="header-anchor">#</a> Pretty Taichi-scope traceback</h2> <p>As we all know, Python provides a useful stack traceback system, which
could help you locate the issue easily. But sometimes stack tracebacks
from <strong>Taichi-scope</strong> could be extremely complicated and hard to read.
For example:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> taichi <span class="token keyword">as</span> ti
ti<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>func</span>
<span class="token keyword">def</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ti<span class="token punctuation">.</span>static_assert<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>func</span>
<span class="token keyword">def</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    func3<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>func</span>
<span class="token keyword">def</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    func2<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>kernel</span>
<span class="token keyword">def</span> <span class="token function">func0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    func1<span class="token punctuation">(</span><span class="token punctuation">)</span>

func0<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Running this code, of course, will result in an <code>AssertionError</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>Traceback (most recent call last):
  File &quot;misc/demo_excepthook.py&quot;, line 20, in &lt;module&gt;
    func0()
  File &quot;/root/taichi/python/taichi/lang/kernel.py&quot;, line 559, in wrapped
    return primal(*args, **kwargs)
  File &quot;/root/taichi/python/taichi/lang/kernel.py&quot;, line 488, in __call__
    self.materialize(key=key, args=args, arg_features=arg_features)
  File &quot;/root/taichi/python/taichi/lang/kernel.py&quot;, line 367, in materialize
    taichi_kernel = taichi_kernel.define(taichi_ast_generator)
  File &quot;/root/taichi/python/taichi/lang/kernel.py&quot;, line 364, in taichi_ast_generator
    compiled()
  File &quot;misc/demo_excepthook.py&quot;, line 18, in func0
    func1()
  File &quot;/root/taichi/python/taichi/lang/kernel.py&quot;, line 39, in decorated
    return fun.__call__(*args)
  File &quot;/root/taichi/python/taichi/lang/kernel.py&quot;, line 79, in __call__
    ret = self.compiled(*args)
  File &quot;misc/demo_excepthook.py&quot;, line 14, in func1
    func2()
  File &quot;/root/taichi/python/taichi/lang/kernel.py&quot;, line 39, in decorated
    return fun.__call__(*args)
  File &quot;/root/taichi/python/taichi/lang/kernel.py&quot;, line 79, in __call__
    ret = self.compiled(*args)
  File &quot;misc/demo_excepthook.py&quot;, line 10, in func2
    func3()
  File &quot;/root/taichi/python/taichi/lang/kernel.py&quot;, line 39, in decorated
    return fun.__call__(*args)
  File &quot;/root/taichi/python/taichi/lang/kernel.py&quot;, line 79, in __call__
    ret = self.compiled(*args)
  File &quot;misc/demo_excepthook.py&quot;, line 6, in func3
    ti.static_assert(1 + 1 == 3)
  File &quot;/root/taichi/python/taichi/lang/error.py&quot;, line 14, in wrapped
    return foo(*args, **kwargs)
  File &quot;/root/taichi/python/taichi/lang/impl.py&quot;, line 252, in static_assert
    assert cond
AssertionError
</code></pre></div><p>You may already feel brain fried by the annoying <code>decorated</code>'s and
<code>__call__</code>'s. These are the Taichi internal stack frames. They have
almost no benefit for end-users but make the traceback hard to read.</p> <p>For this purpose, we may want to use <code>ti.init(excepthook=True)</code>, which
<em>hooks</em> on the exception handler, and make the stack traceback from
Taichi-scope easier to read and intuitive. e.g.:</p> <div class="language-python extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br></div><pre class="language-python"><code><span class="token keyword">import</span> taichi <span class="token keyword">as</span> ti
ti<span class="token punctuation">.</span>init<span class="token punctuation">(</span>excepthook<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># just add this option!</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>And the result will be:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> Taichi Stack Traceback <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
In <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> at misc<span class="token operator">/</span>demo_excepthook<span class="token punctuation">.</span>py<span class="token punctuation">:</span><span class="token number">21</span><span class="token punctuation">:</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>kernel</span>
<span class="token keyword">def</span> <span class="token function">func0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    func1<span class="token punctuation">(</span><span class="token punctuation">)</span>

func0<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
In func0<span class="token punctuation">(</span><span class="token punctuation">)</span> at misc<span class="token operator">/</span>demo_excepthook<span class="token punctuation">.</span>py<span class="token punctuation">:</span><span class="token number">19</span><span class="token punctuation">:</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
    func2<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>kernel</span>
<span class="token keyword">def</span> <span class="token function">func0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    func1<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token operator">-</span>

func0<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
In func1<span class="token punctuation">(</span><span class="token punctuation">)</span> at misc<span class="token operator">/</span>demo_excepthook<span class="token punctuation">.</span>py<span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">:</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
    func3<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>func</span>
<span class="token keyword">def</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    func2<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token operator">-</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>kernel</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
In func2<span class="token punctuation">(</span><span class="token punctuation">)</span> at misc<span class="token operator">/</span>demo_excepthook<span class="token punctuation">.</span>py<span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">:</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
    ti<span class="token punctuation">.</span>static_assert<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>func</span>
<span class="token keyword">def</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    func3<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token operator">-</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>func</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
In func3<span class="token punctuation">(</span><span class="token punctuation">)</span> at misc<span class="token operator">/</span>demo_excepthook<span class="token punctuation">.</span>py<span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">:</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
ti<span class="token punctuation">.</span>enable_excepthook<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>func</span>
<span class="token keyword">def</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ti<span class="token punctuation">.</span>static_assert<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token operator">-</span>

<span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>func</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
AssertionError
</code></pre></div><p>See? Our exception hook has removed some useless Taichi internal frames
from traceback. What's more, although not visible in the doc, the
output is <strong>colorful</strong>!</p> <div class="custom-block note"><p class="custom-block-title">NOTE</p> <p>For IPython / Jupyter notebook users, the IPython stack traceback hook
will be overriden by the Taichi one when <code>ti.enable_excepthook()</code>.</p></div> <h2 id="debugging-tips"><a href="#debugging-tips" class="header-anchor">#</a> Debugging Tips</h2> <p>Debugging a Taichi program can be hard even with the builtin tools
above. Here we showcase some common bugs that one may encounter in a
Taichi program.</p> <h3 id="static-type-system"><a href="#static-type-system" class="header-anchor">#</a> Static type system</h3> <p>Python code in Taichi-scope is translated into a statically typed
language for high performance. This means code in Taichi-scope can have
a different behavior compared with that in Python-scope, especially when
it comes to types.</p> <p>The type of a variable is simply <strong>determined at its initialization and
never changes later</strong>.</p> <p>Although Taichi's static type system provides better performance, it
may lead to bugs if programmers carelessly used the wrong types. For
example,</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>kernel</span>
<span class="token keyword">def</span> <span class="token function">buggy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ret <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 0 is an integer, so `ret` is typed as int32</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        ret <span class="token operator">+=</span> <span class="token number">0.1</span> <span class="token operator">*</span> i  <span class="token comment"># i32 += f32, the result is still stored in int32!</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>  <span class="token comment"># will show 0</span>

buggy<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>The code above shows a common bug due to Taichi's static type system.
The Taichi compiler should show a warning like:</p> <div class="language- extra-class"><pre class="language-text"><code>[W 06/27/20 21:43:51.853] [type_check.cpp:visit@66] [$19] Atomic add (float32 to int32) may lose precision.
</code></pre></div><p>This means that Taichi cannot store a <code>float32</code> result precisely to
<code>int32</code>. The solution is to initialize <code>ret</code> as a float-point value:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token decorator annotation punctuation">@ti<span class="token punctuation">.</span>kernel</span>
<span class="token keyword">def</span> <span class="token function">not_buggy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ret <span class="token operator">=</span> <span class="token number">0.0</span>  <span class="token comment"># 0 is a floating point number, so `ret` is typed as float32</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        ret <span class="token operator">+=</span> <span class="token number">0.1</span> <span class="token operator">*</span> i  <span class="token comment"># f32 += f32. OK!</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>  <span class="token comment"># will show 0.6</span>

not_buggy<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="advanced-optimization"><a href="#advanced-optimization" class="header-anchor">#</a> Advanced Optimization</h3> <p>Taichi has an advanced optimization engine to make your Taichi kernel to
be as fast as it could. But like what <code>gcc -O3</code> does, advanced
optimization may occasionally lead to bugs as it tries too hard. This
includes runtime errors such as:</p> <p><code>RuntimeError: [verify.cpp:basic_verify@40] stmt 8 cannot have operand 7.</code></p> <p>You may use <code>ti.init(advanced_optimization=False)</code> to turn off advanced
optimization and see if the issue still exists:</p> <div class="language-python extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-python"><code><span class="token keyword">import</span> taichi <span class="token keyword">as</span> ti

ti<span class="token punctuation">.</span>init<span class="token punctuation">(</span>advanced_optimization<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>Whether or not turning off optimization fixes the issue, please feel
free to report this bug on
<a href="https://github.com/taichi-dev/taichi/issues/new?labels=potential+bug&amp;template=bug_report.md" target="_blank" rel="noopener noreferrer">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
Thank you!</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/taichi-dev/taichi.graphics/edit/master/versioned_docs/develop/documentation/misc/debugging.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/6/2020, 1:26:47 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/taichi.graphics/versioned_docs/develop/documentation/misc/gui.html" class="prev">
        GUI system
      </a></span> <span class="next"><a href="/taichi.graphics/versioned_docs/develop/documentation/misc/export_results.html">
        Export your results
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/taichi.graphics/assets/js/app.5fd9acd9.js" defer></script><script src="/taichi.graphics/assets/js/5.bcfffdd2.js" defer></script><script src="/taichi.graphics/assets/js/53.62fe4cf9.js" defer></script>
  </body>
</html>
