(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{529:function(t,_,i){"use strict";i.r(_);var e=i(20),v=Object(e.a)({},(function(){var t=this,_=t.$createElement,i=t._self._c||_;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("h1",{attrs:{id:"全局设置"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#全局设置"}},[t._v("#")]),t._v(" 全局设置")]),t._v(" "),i("h2",{attrs:{id:"后端"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#后端"}},[t._v("#")]),t._v(" 后端")]),t._v(" "),i("ul",[i("li",[t._v("指定要使用的后端，请使用："),i("code",[t._v("ti.init(arch=ti.cuda)")]),t._v("。")]),t._v(" "),i("li",[t._v("指定 CUDA 预分配内存的大小："),i("code",[t._v("ti.init(device_memory_GB=0.5)")]),t._v("。")]),t._v(" "),i("li",[t._v("禁止 CUDA 使用统一内存 (Unified Memory)："),i("code",[t._v("ti.init(use_unified_memory=False)")]),t._v("。")]),t._v(" "),i("li",[t._v("指定 CUDA 所使用的 GPU："),i("code",[t._v("export CUDA_VISIBLE_DEVICES=[gpuid]")]),t._v("。")]),t._v(" "),i("li",[t._v("要在启动时禁用某个后端，比如 CUDA："),i("code",[t._v("export TI_ENABLE_CUDA=0")]),t._v("。")])]),t._v(" "),i("h2",{attrs:{id:"编译"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#编译"}},[t._v("#")]),t._v(" 编译")]),t._v(" "),i("ul",[i("li",[t._v("禁用高级优化以节省编译时间和可能的错误："),i("code",[t._v("ti.init(advanced_optimization=False)")]),t._v("。")]),t._v(" "),i("li",[t._v("禁用 fast math 以防止可能出现的未定义数学行为："),i("code",[t._v("ti.init(fast_math=False)")]),t._v("。")]),t._v(" "),i("li",[t._v("如要打印预处理后的 Python 代码："),i("code",[t._v("ti.init(print_preprocessed=True)")]),t._v("。")]),t._v(" "),i("li",[t._v("如要显示美化后的 Taichi 作用域栈回溯："),i("code",[t._v("ti.init(excepthook=True)")]),t._v("。")]),t._v(" "),i("li",[t._v("如要打印生成的中间表示码 (IR)："),i("code",[t._v("ti.init(print_ir=True)")]),t._v("。")])]),t._v(" "),i("h2",{attrs:{id:"运行时"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#运行时"}},[t._v("#")]),t._v(" 运行时")]),t._v(" "),i("ul",[i("li",[t._v("重新启动 Taichi 运行时系统（销毁所有场和内核）："),i("code",[t._v("ti.reset()")]),t._v("。")]),t._v(" "),i("li",[t._v("如要以调试模式启动程序："),i("code",[t._v("ti.init(debug=True)")]),t._v(" 或 "),i("code",[t._v("ti debug your_script.py")]),t._v("。")]),t._v(" "),i("li",[t._v("禁止在启动时导入 torch："),i("code",[t._v("export TI_ENABLE_TORCH=0")]),t._v("。")])]),t._v(" "),i("h2",{attrs:{id:"日志记录"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#日志记录"}},[t._v("#")]),t._v(" 日志记录")]),t._v(" "),i("ul",[i("li",[t._v("通过输出 TRACE 级日志以显示更详尽的信息："),i("code",[t._v("ti.init(log_level=ti.TRACE)")]),t._v(" 或 "),i("code",[t._v("ti.set_logging_level(ti.TRACE)")]),t._v("。")]),t._v(" "),i("li",[t._v("消除冗余输出："),i("code",[t._v("ti.init(verbose=False)")]),t._v("。")])]),t._v(" "),i("h2",{attrs:{id:"开发"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#开发"}},[t._v("#")]),t._v(" 开发")]),t._v(" "),i("ul",[i("li",[t._v("如要在 Taichi 崩溃时触发 GDB："),i("code",[t._v("ti.init(gdb_trigger=True)")]),t._v("。")]),t._v(" "),i("li",[i("strong",[t._v("开发模式")]),t._v("中，缓存编译过的运行时位码 (compiled runtime bitcode) 以节省启动时间："),i("code",[t._v("export TI_CACHE_RUNTIME_BITCODE=1")]),t._v("。")]),t._v(" "),i("li",[t._v("如要指定运行测试的线程数："),i("code",[t._v("export TI_TEST_THREADS=4")]),t._v(" 或 "),i("code",[t._v("ti test -t4")]),t._v("。")])]),t._v(" "),i("h2",{attrs:{id:"由环境变量指定-ti-init-中的参数"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#由环境变量指定-ti-init-中的参数"}},[t._v("#")]),t._v(" 由环境变量指定 "),i("code",[t._v("ti.init")]),t._v(" 中的参数")]),t._v(" "),i("p",[i("code",[t._v("ti.init")]),t._v(" 中的参数也可以从环境变量中指定。 例如：")]),t._v(" "),i("ul",[i("li",[i("code",[t._v("ti.init(arch=ti.cuda)")]),t._v(" 相当于 "),i("code",[t._v("export TI_ARCH=cuda")]),t._v("。")]),t._v(" "),i("li",[i("code",[t._v("ti.init(log_level=ti.TRACE)")]),t._v(" 相当于 "),i("code",[t._v("export TI_LOG_LEVEL=trace")]),t._v("。")]),t._v(" "),i("li",[i("code",[t._v("ti.init(debug=True)")]),t._v(" 相当于 "),i("code",[t._v("export TI_DEBUG=1")]),t._v("。")]),t._v(" "),i("li",[i("code",[t._v("ti.init(use_unified_memory=False)")]),t._v(" 相当于 "),i("code",[t._v("export TI_USE_UNIFIED_MEMORY=0")]),t._v("。")])]),t._v(" "),i("p",[t._v("如果 "),i("code",[t._v("ti.init")]),t._v(" 中的参数也同时在对应的环境变量中被指定，那么环境变量中的参数将"),i("strong",[t._v("覆盖")]),t._v(" <0>ti.init</0> 中的参数，例如：")]),t._v(" "),i("ul",[i("li",[t._v("如果同时指定了 "),i("code",[t._v("ti.init(arch=ti.cuda)")]),t._v(" 和 "),i("code",[t._v("export TI_ARCH=opengl")]),t._v("，那么 Taichi 将会选择 "),i("code",[t._v("ti.opengl")]),t._v(" 作为后端。")]),t._v(" "),i("li",[t._v("如果同时指定了 "),i("code",[t._v("ti.init(debug=True)")]),t._v(" 和 "),i("code",[t._v("export TI_DEBUG=0")]),t._v("，那么 Taichi 将会禁用 debug 模式。")])]),t._v(" "),i("div",{staticClass:"custom-block note"},[i("p",{staticClass:"custom-block-title"},[t._v("注解")]),t._v(" "),i("p",[t._v("如果调用了两次 "),i("code",[t._v("ti.init")]),t._v("，那么首次调用时的配置将被完全丢弃，例如：")]),t._v(" "),i("div",{staticClass:"language-python extra-class"},[i("div",{staticClass:"highlight-lines"},[i("div",{staticClass:"highlighted"},[t._v(" ")]),i("br"),i("div",{staticClass:"highlighted"},[t._v(" ")]),i("br"),i("br")]),i("pre",{pre:!0,attrs:{class:"language-python"}},[i("code",[t._v("ti"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("init"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("debug"),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),i("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ti"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cfg"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("debug"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),i("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# True")]),t._v("\nti"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("init"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ti"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cfg"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("debug"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),i("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# False")]),t._v("\n")])])])])])}),[],!1,null,null,null);_.default=v.exports}}]);